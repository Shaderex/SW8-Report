%!TEX root = ../../super_main.tex

\section{Testing Platform}
\label{sub:testing_platform}

At first in our development process, we utilized JUnit tests for testing the native Android code. However, alot of different features in the Android framework are specific to Android and are not testable using JUnit, because it is a tool originally designed for standard Java development. To solve this problem we aditionally chose to utilize the Robolectric framework\footnote{http://robolectric.org/} , which allows for mocking of Android \emph{Activity} objects and general Android behavior from the native environment when using JUnit. This allows very coupled Android components to be tested seperately and without the use of an emulator or an actual device. 
\\\\
That worked until we started using sensors during the development, because neither the JUnit framework nor the Robolectric framework facilitate mocked sensor events. Sensor events were an important part of the solution we had in mind, and we therefore decided to start using instrumented tests, which is tests that is run on an Android device. This could easily be facilitated during the development by using our own Android cellphones, but for the purpose of Continuous Integration and Jenkins builds, the server also needed access to a running device. It would be inconvenient to use our own phones, because the server had to be located in the basement of the institute in order to have access from outside the university's network. 
\\\\
The mobile telephones we could borrow from the university were old devices running Android version 4.3 or lower, which correspond to Android API level 18 \parencite{uses_sdk}. Since only roughly a quarter of Android devices run this version or lower \parencite{android_dashboard} we deemed that it was too unused. Furthermore, newer versions of Android were improved and provided many new features related to wearables, which appealed to us. Meanwhile most of the phones in the group was API level 21 or higher, we therefore chose API level 21 as the minimum supported version. 
\newpage
This meant that in order to use the devices we could borrow, we had to root them and flash a new OS onto them. The devices we could borrow were the Galaxy S3 Mini VE (i8200) and the Galaxy S3 Mini (i8190). We spent a couple of days on researching and attempting to install a newer Android OS on the two devices, but the i8200 did not have any ROMs available from trustworthy sites, and the i8190 would enter a boot-loop when we flashed it. Both phones were therefore reset to factory settings and returned. After this we got our hands on a Galaxy Nexus, for which the Android community has made a lot of high quality ROMs and guides for flashing. We managed to flash the Nexus to 5.0 (API 21), which allowed us to connect it to the CI server and run instrumented tests. We therefore decided to migrate all of our old Robolectric tests to instrumented tests, such that we only had a single type of tests. 
